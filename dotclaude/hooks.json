{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node ~/.claude/scripts/hooks/session-start.js"
          }
        ],
        "description": "Restore previous session context"
      }
    ],
    "SessionEnd": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node ~/.claude/scripts/hooks/session-end.js"
          }
        ],
        "description": "Save session state"
      }
    ],
    "PreCompact": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node ~/.claude/scripts/hooks/pre-compact.js"
          }
        ],
        "description": "Save state before context compaction"
      }
    ],
    "PreToolUse": [
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"(npm run dev|pnpm( run)? dev|yarn dev|bun run dev)\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"console.error('[Hook] BLOCKED: Dev server must run in tmux');console.error('[Hook] Use: tmux new-session -d -s dev \\\"npm run dev\\\"');process.exit(1)\""
          }
        ],
        "description": "Dev server must run in tmux for log access"
      },
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"git push\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"console.error('[Hook] Reminder: Review changes before push')\""
          }
        ],
        "description": "Reminder before git push"
      },
      {
        "matcher": "tool == \"Write\" && tool_input.file_path matches \"\\\\.(md|txt)$\" && !(tool_input.file_path matches \"(README|CLAUDE|PRINCIPLES|CONSTITUTION|KICKOFF|SPEC|PLAN|REVIEW|IMPLEMENT|REVISIONS|INDEX|SKILL)\\\\.md$|\\\\.wf/|docs/wf/|templates/\")",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const i=JSON.parse(require('fs').readFileSync('/dev/stdin','utf8'));const p=i.tool_input?.file_path||'';console.error('[Hook] WARNING: Creating non-standard .md file: '+p);console.error('[Hook] Consider using templates/ or docs/wf/ structure')\""
          }
        ],
        "description": "Warn about non-standard markdown file creation"
      }
    ],
    "PostToolUse": [
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx|js|jsx)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&fs.existsSync(p)){const c=fs.readFileSync(p,'utf8');const matches=[];c.split('\\n').forEach((l,idx)=>{if(/console\\.log/.test(l))matches.push((idx+1)+': '+l.trim())});if(matches.length){console.error('[Hook] WARNING: console.log found in '+p);matches.slice(0,5).forEach(m=>console.error('  '+m))}}console.log(d)})\""
          }
        ],
        "description": "Warn about console.log in JS/TS files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(kt|kts)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&fs.existsSync(p)){const c=fs.readFileSync(p,'utf8');const matches=[];c.split('\\n').forEach((l,idx)=>{if(/\\b(println|print)\\s*\\(|Log\\.(d|e|w|i|v|wtf)\\s*\\(/.test(l)&&!/\\/\\//.test(l.split(/\\b(println|print|Log)/)[0]))matches.push((idx+1)+': '+l.trim())});if(matches.length){console.error('[Hook] WARNING: Debug log found in '+p);matches.slice(0,5).forEach(m=>console.error('  '+m));console.error('[Hook] Use Timber or remove before release')}}console.log(d)})\""
          }
        ],
        "description": "Warn about println/Log.d in Kotlin files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(swift)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&fs.existsSync(p)){const c=fs.readFileSync(p,'utf8');const matches=[];c.split('\\n').forEach((l,idx)=>{if(/\\b(print|NSLog|debugPrint)\\s*\\(/.test(l)&&!/\\/\\//.test(l.split(/\\b(print|NSLog|debugPrint)/)[0]))matches.push((idx+1)+': '+l.trim())});if(matches.length){console.error('[Hook] WARNING: Debug log found in '+p);matches.slice(0,5).forEach(m=>console.error('  '+m));console.error('[Hook] Use os_log or Logger, remove before release')}}console.log(d)})\""
          }
        ],
        "description": "Warn about print/NSLog in Swift files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(java)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&fs.existsSync(p)){const c=fs.readFileSync(p,'utf8');const matches=[];c.split('\\n').forEach((l,idx)=>{if(/System\\.out\\.print|Log\\.(d|e|w|i|v)\\s*\\(/.test(l)&&!/\\/\\//.test(l.split(/(System\\.out|Log)/)[0]))matches.push((idx+1)+': '+l.trim())});if(matches.length){console.error('[Hook] WARNING: Debug log found in '+p);matches.slice(0,5).forEach(m=>console.error('  '+m));console.error('[Hook] Use Timber or remove before release')}}console.log(d)})\""
          }
        ],
        "description": "Warn about System.out/Log.d in Java files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(py)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&fs.existsSync(p)){const c=fs.readFileSync(p,'utf8');const matches=[];c.split('\\n').forEach((l,idx)=>{if(/\\bprint\\s*\\(/.test(l)&&!/^\\s*#/.test(l))matches.push((idx+1)+': '+l.trim())});if(matches.length){console.error('[Hook] WARNING: print() found in '+p);matches.slice(0,5).forEach(m=>console.error('  '+m));console.error('[Hook] Use logging module instead')}}console.log(d)})\""
          }
        ],
        "description": "Warn about print() in Python files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(go)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&fs.existsSync(p)){const c=fs.readFileSync(p,'utf8');const matches=[];c.split('\\n').forEach((l,idx)=>{if(/fmt\\.Print|log\\.Print/.test(l)&&!/\\/\\//.test(l.split(/fmt|log/)[0]))matches.push((idx+1)+': '+l.trim())});if(matches.length){console.error('[Hook] WARNING: Debug print found in '+p);matches.slice(0,5).forEach(m=>console.error('  '+m))}}console.log(d)})\""
          }
        ],
        "description": "Warn about fmt.Print/log.Print in Go files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(rs)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const p=i.tool_input?.file_path;if(p&&fs.existsSync(p)){const c=fs.readFileSync(p,'utf8');const matches=[];c.split('\\n').forEach((l,idx)=>{if(/\\b(println!|print!|dbg!)\\s*\\(/.test(l)&&!/\\/\\//.test(l.split(/(println|print|dbg)/)[0]))matches.push((idx+1)+': '+l.trim())});if(matches.length){console.error('[Hook] WARNING: Debug macro found in '+p);matches.slice(0,5).forEach(m=>console.error('  '+m));console.error('[Hook] Use tracing or log crate instead')}}console.log(d)})\""
          }
        ],
        "description": "Warn about println!/dbg! in Rust files"
      },
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"gh pr create\"",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{const i=JSON.parse(d);const out=i.tool_output?.output||'';const m=out.match(/https:\\/\\/github.com\\/[^\\s]+/);if(m){console.error('[Hook] PR created: '+m[0])}console.log(d)})\""
          }
        ],
        "description": "Log PR URL after creation"
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const{execSync}=require('child_process');const fs=require('fs');let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{try{execSync('git rev-parse --git-dir',{stdio:'pipe'})}catch{console.log(d);process.exit(0)}try{const files=execSync('git diff --name-only HEAD',{encoding:'utf8'}).split('\\n').filter(f=>f.trim());const patterns={'.ts,.tsx,.js,.jsx':/console\\.log/,'.kt,.kts':/\\b(println|Log\\.(d|e|w|i|v))\\(/,'.swift':/\\b(print|NSLog)\\(/,'.java':/System\\.out\\.print|Log\\.(d|e|w|i|v)\\(/,'.py':/\\bprint\\(/,'.go':/fmt\\.Print|log\\.Print/,'.rs':/\\b(println!|dbg!)\\(/};let found=[];for(const f of files){if(!fs.existsSync(f))continue;const ext='.'+f.split('.').pop();for(const[exts,pat]of Object.entries(patterns)){if(exts.split(',').includes(ext)){const c=fs.readFileSync(f,'utf8');if(pat.test(c))found.push(f);break}}}if(found.length){console.error('[Hook] Debug logs in uncommitted files:');found.forEach(f=>console.error('  - '+f))}}catch{}console.log(d)})\""
          }
        ],
        "description": "Check debug logs in modified files after response"
      }
    ]
  }
}
