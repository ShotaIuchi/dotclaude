# dotclaude 憲法（CONSTITUTION）

このファイルは dotclaude に対する**絶対的なルール**を定義する。
新規追加・変更時は必ず遵守すること。違反は即座に修正。

---

## 第1条: 構造の即時確定

新しいファイル・ディレクトリを追加する際、その場で最終的な構造を確定する。

### 禁止
- 「とりあえず」「後で整理」という配置
- ルート直下への新規ディレクトリ追加（グループ化されていない追加）
- 既存構造と矛盾する階層

### 必須
- 既存のグループディレクトリに配置
- 新グループが必要な場合、先にこの憲法を更新

### references/ 構造
```
references/
├── common/          # 全カテゴリ共通
├── platforms/       # プラットフォーム（android, ios, web, desktop）
├── languages/       # プログラミング言語（kotlin, swift, typescript）
└── services/        # クラウドサービス（aws, gcp, azure）
```

### skills/ 構造
```
skills/
└── {skill-name}/
    └── SKILL.md     # 必須
```

### agents/ 構造
```
agents/
├── _base/           # 共通制約・コンテキスト
├── analysis/        # 分析系エージェント
├── workflow/        # ワークフロー系エージェント
└── task/            # タスク系エージェント
```

---

## 第2条: ドキュメントの同時作成

ファイル追加時、関連ドキュメントを同時に作成・更新する。

### 必須ドキュメント

| 追加対象 | 必須ドキュメント |
|---------|-----------------|
| 新カテゴリ（references/{group}/{category}/） | index.md |
| 新スキル（skills/{name}/） | SKILL.md |
| 新エージェント（agents/{type}/{name}/） | AGENT.md |
| 新コマンド（commands/） | ファイル先頭にコメントで説明 |

### 更新必須

| 追加対象 | 更新対象 |
|---------|---------|
| references/ 内のファイル | references/INDEX.md |
| skills/ 内のスキル | 参照する references のパス |

---

## 第3条: 命名規則の遵守

既存の命名パターンに従う。新しい命名規則を導入しない。

### ファイル名
- ケバブケース: `clean-architecture.md`, `sam-template.md`
- index ファイル: `index.md`（大文字は INDEX.md のみ）

### ディレクトリ名
- ケバブケース: `android-architecture/`, `aws-sam/`
- 単数形: `platform/` ではなく `platforms/`（グループは複数形）

### frontmatter
```yaml
---
name: 英語タイトル
description: 英語説明（Claude が参照するため）
references:
  - path: 相対パス
---
```

---

## 第4条: 依存関係の完結

ファイル追加時、全ての依存関係を同時に解決する。

### チェックリスト
- [ ] 参照先ファイルが存在するか
- [ ] 相対パスが正しいか
- [ ] 参照元（INDEX.md, SKILL.md）を更新したか
- [ ] 壊れたリンクがないか

### 禁止
- 存在しないファイルへの参照
- 「後でパスを直す」という前提の追加
- 他ファイルの参照を壊す移動

---

## 第5条: 違反時の即時対応

この憲法に違反する追加・変更を発見した場合：

1. **即座に修正** - 次のタスクに進む前に修正
2. **差し戻し禁止** - 違反状態でのコミット禁止
3. **憲法更新** - ルールが不適切な場合は先に憲法を更新

---

## 附則: 憲法の更新

この憲法自体を更新する場合：
1. 変更理由を明記
2. 既存ファイルへの影響を確認
3. 影響がある場合は同時に修正
