# /sh2-run

スケジュールから次のタスクを選択し、依存関係順に実行するコマンド。

## 使用方法

```
/sh2-run [オプション]
```

## オプション

| オプション | 説明 |
|----------|------|
| `--dry-run` | タスク情報を表示のみ、実行しない |
| `--until <phase>` | 指定フェーズまで自動実行（選択をスキップ） |
| `--all` | 全タスク完了まで自動実行（最大50タスク） |
| `--no-branch` | wf1-kickoffでブランチ作成をスキップし、現在のブランチを使用 |

## 処理の流れ

1. `.wf/schedule.json` を読み込み（なければエラー）
2. 依存解決済みのpendingタスクを優先度順に取得
3. タスク情報を表示（work ID、ソース、タイトル、依存関係）
4. `--dry-run`なら進捗表示して終了
5. 実行範囲を選択（`--until`/`--all`未指定時）
6. `/wf1-kickoff` → `/wf0-nextstep`ループでワークフロー実行
7. PR作成済みならscheduleを完了に更新、残タスクを表示

## 実行範囲の選択

オプションなしで実行すると、以下の選択肢が表示される：

| 選択肢 | 説明 |
|--------|------|
| wf1-kickoff only | 作業開始のみ |
| Until wf3-plan | 設計フェーズまで |
| Until wf4-review | レビューフェーズまで |
| Until wf6-verify（推奨） | タスク全体を完了 |
| Complete all tasks | スケジュール内の全タスクを実行 |

## wf0-nextstep との違い

| コマンド | スコープ |
|---------|----------|
| `/wf0-nextstep` | 1つのwork内でのフェーズ遷移（wf1→wf2→...→wf6） |
| `/sh2-run` | schedule.json内の複数workから次を選択・実行 |

## 注意事項

- スケジュールは事前に `/sh1-create create` で作成が必要
- タスクは依存関係を考慮して優先度順に実行される
- `--all` 実行時は最大50タスクの制限あり（安全のため）
