# Commit Guard ルール

## 前提条件

コミット前に、以下のいずれかの場所にスキーマが存在することを確認:

**プロジェクト固有（優先）:**
- `docs/rules/git.md`
- `docs/rules/commit.schema.md`
- `docs/rules/commit.md`

**グローバル（フォールバック）:**
- `.claude/rules/git.md`
- `.claude/rules/commit.schema.md`
- `.claude/rules/commit.md`

## ガード（MUST）

スキーマがいずれの場所にも存在しない場合、**いかなる理由があっても`git commit`を実行しない**。

その場合は以下のいずれかを行う:

- 先にスキーマ/ルールドキュメントを作成（ユーザーに保存場所を選択させる）
- 「スキーマがないためコミットできません」とユーザーに通知して終了

## 保存場所オプション

新しいスキーマを作成する場合、以下のオプションをユーザーに提示:

| オプション | パス | 目的 |
|-----------|------|------|
| `docs/` | `docs/rules/commit.schema.md` | プロジェクト固有、リポジトリにコミット |
| `.claude/` | `.claude/rules/commit.schema.md` | プロジェクト固有、リポジトリにコミット |
| `~/.claude/` | `~/.claude/rules/commit.schema.md` | グローバル、全プロジェクトで共有 |

**デフォルト推奨**: `docs/`（プロジェクトドキュメントとして管理）

## 作成後の動作（MUST）

スキーマを新規作成した場合、**コミットに進まない**。

作成後は以下を行い終了:

1. 作成したスキーマファイルのパスをユーザーに通知
2. 「スキーマが作成されました。内容を確認して再度コミットをリクエストしてください」と指示
3. コミットを実行せずに終了
