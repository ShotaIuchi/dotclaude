# /commit

サブエージェント経由でコミットを実行し、コミットメッセージを自動生成する。

## 目的

- コミットメッセージの自動生成
- commit.schema.md に従ったコミット作成

## 使用方法

```
/commit [--files <path>] [message | scope instruction]
```

## 使用例

```bash
# コミットメッセージを自動生成（ステージ済みファイルのみ、なければ全変更）
/commit

# メッセージを指定
/commit feat: Add user authentication

# スコープを自然言語で指定
/commit 認証機能の変更だけ

# ファイルパスでスコープ指定
/commit --files src/auth/

# メッセージとスコープの組み合わせ
/commit --files src/auth/ feat: Add login feature
```

## ステージング戦略

以下の優先順位でステージ対象を決定する:

1. **`--files` オプション**: 指定パス/globパターンに一致するファイルのみ
2. **スコープ指示（自然言語）**: 指示に合致するファイルのみ選択
3. **既にステージ済み**: スコープ/files未指定で既にステージ済みファイルがある場合、それのみコミット
4. **デフォルト**: 全変更ファイルを確認し適切にステージ（.env等の機密ファイルは除外）

## オプション

| オプション | 説明 | デフォルト |
|----------|------|---------|
| `--files <path>` | 指定パス/globパターンに一致するファイルのみステージ | - |
| `--dry-run` | 実際にコミットせず、何がコミットされるか表示 | off |
| `--amend` | 直前のコミットを修正 | off |

## 注意事項

- pre-commitフックが存在する場合は実行される
- コンフリクトがある場合はエラー終了
- `--amend`は直前のコミットが自分のものであることを確認してから使用
