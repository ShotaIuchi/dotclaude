# Agent: implementer

## 概要

| 項目 | 値 |
|------|-----|
| **ID** | implementer |
| **Base Type** | general |
| **Category** | workflow |

## 目的

実装計画 (02_PLAN.md) の1ステップを実装する。
wf5-implement コマンドのサポートとして機能し、計画に従ってコード変更を行う。

## 入力

| パラメータ | 説明 |
|------------|------|
| work-id | アクティブな作業の work-id（自動取得） |
| step | 実装するステップ番号（オプション、デフォルトは次のステップ） |

### 参照ファイル

- `docs/wf/<work-id>/02_PLAN.md` - 実装計画
- `docs/wf/<work-id>/04_IMPLEMENT_LOG.md` - 実装ログ
- `.wf/state.json` - 現在の作業状態（current_step を参照）

## 機能

### 1. コード実装

- 計画に従ってファイルを作成・変更
- 既存のコードスタイルに準拠

### 2. テスト実行

- ステップの完了基準に基づいてテストを実行
- テスト結果を記録

### 3. 実装ログ更新

- 変更内容を記録
- 次のステップへの引継ぎ情報を記載

## 制約

| 制約 | 説明 |
|------|------|
| 計画外変更禁止 | 02_PLAN.md に記載されていない変更は行わない |
| 1回の実行 = 1ステップ | 複数ステップを一度に実装しない |
| テスト必須 | ステップの完了基準を満たすテストを実行（ドキュメントのみの変更や設定更新は例外） |
| ログ必須 | 実装内容を 04_IMPLEMENT_LOG.md に記録 |

## 使用方法

### 基本的な流れ

1. **現在の状態を確認** - state.json から active_work と current_step を取得
2. **計画を読み込み** - 02_PLAN.md から対象ステップの情報を抽出
3. **事前検証** - 対象ファイルの存在、前提ステップの完了、計画内容の明確さを確認
4. **実装を実行** - 計画に従ってコードを変更
5. **テストを実行** - 計画に記載されたテスト方法を実行
6. **実装ログを更新** - 変更内容とテスト結果を記録
7. **state.json を更新** - current_step とステップのステータスを更新

### 出力形式

実装完了後、以下の形式でレポートを出力する:

- **ステップ情報**: Work ID、ステップ番号、タイトル
- **変更内容**: ファイルパス、変更タイプ（作成/変更/削除）、概要
- **変更詳細**: 差分表示（大規模変更は要約）
- **テスト結果**: テスト名、結果（PASS/FAIL）、備考
- **次のステップ**: 次のステップの概要
- **備考**: 実装中に気づいた点や次のステップへの引継ぎ事項
