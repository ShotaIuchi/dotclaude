# Review: constraints.md

> Reviewed: 2026-01-22
> Original: dotclaude/agents/_base/constraints.md

## 概要 (Summary)

このドキュメントは、サブエージェント全体に適用される共通制約を定義しています。基本制約、コード品質、出力形式、エラー処理、セキュリティ、インタラクションルールの6つのカテゴリに分類され、エージェントの動作範囲と責任を明確に規定しています。エージェントシステムの一貫性と安全性を保つための基盤となる重要なドキュメントです。

## 評価 (Evaluation)

### 品質 (Quality)

- [x] **完全性 (Completeness)**: 必要な情報が網羅されている
- [x] **明確性 (Clarity)**: 読者にとって分かりやすい
- [x] **一貫性 (Consistency)**: 用語・スタイルが統一されている

### 技術的正確性 (Technical Accuracy)

- [x] **情報の正確性 (Correct information)**: 記載内容が正確
- [x] **最新性 (Up-to-date content)**: 情報が最新の状態

## 改善点 (Improvements)

### 優先度高 (High Priority)

| # | 箇所 | 問題 | 提案 | Status |
|---|------|------|------|--------|
| 1 | セクション3「State Consistency」 | state.jsonの具体的なフォーマットや更新タイミングへの参照がない | state.jsonのスキーマや関連ドキュメントへのリンクを追加する | ✓ Fixed (2026-01-22) |
| 2 | セクション「Response Language」 | 出力は英語と規定されているが、本レビューのように日本語出力が必要なケースへの言及がない | 呼び出し元からの指示により言語を変更できる旨を明記する | ✓ Fixed (2026-01-22) |

### 優先度中 (Medium Priority)

| # | 箇所 | 問題 | 提案 | Status |
|---|------|------|------|--------|
| 1 | セクション「Read-Only Principle」 | analysis/以外のエージェント（task/など）の書き込み権限が明示されていない | task/やその他のカテゴリのエージェントの権限を明確に記述する | ✓ Fixed (2026-01-22) |
| 2 | 全体構造 | PRINCIPLES.mdやCONSTITUTION.mdとの関係性が説明されていない | 上位ドキュメントへの参照と優先順位を冒頭に追加する | ✓ Fixed (2026-01-22) |
| 3 | セクション「Structured Output」 | 出力テンプレートが1種類のみで、用途に応じた形式への言及がない | 分析結果、タスク完了報告など、目的別のテンプレートへの参照を追加する | ✓ Fixed (2026-01-22) |

### 将来の検討事項 (Future Considerations)

- エージェント間の通信プロトコルや委譲ルールの追加 *(pending)*
- パフォーマンス制約（タイムアウト、リソース使用量など）の定義 *(pending)*
- バージョニングやドキュメント更新履歴の管理方法の明記 *(pending)*
- 具体的な違反時の対応フローやエスカレーションパスの追加 *(pending)*

## 総評 (Overall Assessment)

全体的に非常によく構成されたドキュメントです。6つの主要カテゴリ（基本制約、コード品質、出力形式、エラー処理、セキュリティ、インタラクションルール）が明確に分離されており、各制約の意図が理解しやすい形で記述されています。

特に優れている点：
- セキュリティ制約が明確で、機密情報の取り扱いと破壊的操作の禁止が適切に規定されている
- 「最小変更の原則」や「既存パターンの尊重」など、実用的なガイドラインが含まれている
- エラー処理セクションで部分的成功のケースも考慮されている

改善が望まれる点：
- プロジェクト全体のドキュメント階層（PRINCIPLES.md、CONSTITUTION.mdなど）との関係性の明示
- タスク実行型エージェントの権限についての詳細な規定
- 言語設定のオーバーライドに関する柔軟性の明記

本ドキュメントはエージェントシステムの基盤として十分な品質を持っており、上記の改善点を反映することでさらに実用性が向上すると考えられます。
